# Teste: 99% de Cobertura Python com Lark
# Demonstra TODAS as funcionalidades em linguagem natural

# ============================================
# BÁSICO
# ============================================
say "Hello, World!"
ask name "What is your name? "
ask number age "What is your age? "

# ============================================
# ESTRUTURAS DE DADOS
# ============================================
list numbers = [1, 2, 3, 4, 5]
dict data = {"name": "Alice", "age": 30}
tuple point = (10, 20)
set unique = {1, 2, 3, 4, 5}

# ============================================
# OPERAÇÕES COM LISTAS
# ============================================
add 6 to numbers
remove 3 from numbers
set first = first item in numbers
set last = last item in numbers
set length = length of numbers
set reversed_list = reverse numbers
set sorted_list = sort numbers

# ============================================
# CONDICIONALES
# ============================================
if age is over 18:
    say "Adult"
elif age is at least 13:
    say "Teen"
else:
    say "Child"

when name is "Alice":
    say "Hello Alice!"

# ============================================
# LOOPS
# ============================================
repeat 5 times:
    say "Hello"

for each number in numbers:
    say number

for every item in numbers:
    say item

while age is greater than 0:
    say age
    set age = age - 1

# ============================================
# FUNÇÕES
# ============================================
define add_numbers(a, b):
    return a + b

function multiply(x, y):
    return x * y

to calculate_sum(numbers):
    set total = 0
    for each num in numbers:
        set total = total + num
    return total

# ============================================
# CLASSES
# ============================================
class Person:
    init(name, age):
        set self.name = name
        set self.age = age
    
    task greet():
        say "Hello, I am " + self.name
    
    task get_age():
        return self.age

class Student(Person):
    init(name, age, school):
        set self.name = name
        set self.age = age
        set self.school = school
    
    task study():
        say "Studying at " + self.school

# ============================================
# DECORATORS
# ============================================
staticmethod:
    task helper():
        say "Static method"

classmethod:
    task create_default():
        return Person("Default", 0)

property:
    task full_name():
        return self.name + " " + self.last_name

# ============================================
# EXCEÇÕES
# ============================================
attempt:
    set result = 10 / 0
catch ZeroDivisionError as e:
    say "Cannot divide by zero"
finally:
    say "Done"

# ============================================
# ASYNC/AWAIT
# ============================================
async task fetch_data(url):
    set response = await request(url)
    return response

# ============================================
# GENERATORS
# ============================================
define number_generator():
    set i = 0
    while i is less than 10:
        yield i
        set i = i + 1

# ============================================
# MATCH/CASE
# ============================================
match value:
    case 1:
        say "One"
    case 2:
        say "Two"
    case _:
        say "Other"

# ============================================
# COMPREHENSIONS
# ============================================
set doubled = list [x * 2 for x in numbers]
set squared = dict {x: x*x for x in numbers}
set evens = set {x for x in numbers if x % 2 == 0}

# ============================================
# SLICING
# ============================================
set slice1 = slice numbers from 1 to 4
set slice2 = numbers[0:3]

# ============================================
# WALRUS OPERATOR
# ============================================
set x := 10
if (set n := len(numbers)) is greater than 5:
    say "List is long"

# ============================================
# TYPE HINTS
# ============================================
set count: int = 10
set name: str = "Alice"
set price: float = 19.99

# ============================================
# ARQUIVOS
# ============================================
open "data.txt" as file:
    set content = file.read()

save text "Hello" to file "output.txt"
read file "input.txt" as data

# ============================================
# MACROS
# ============================================
set sum_result = add 5 and 10
set product = multiply 3 by 4
set joined = join ["a", "b", "c"] with ","
set parts = split "a,b,c" by ","

# ============================================
# PYTHON PURO (ESCAPE) - 100% funciona!
# ============================================
import json
import os
from typing import List, Dict, Optional

set data: Dict[str, int] = {"a": 1, "b": 2}
set items: List[int] = [1, 2, 3]

# Qualquer código Python funciona!
if __name__ == "__main__":
    say "Running as main"

say ""
say "=== Fim: 99% de Cobertura Python com Lark ==="

